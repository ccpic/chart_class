# å‰ç«¯é‡æ„å®Œæˆæ€»ç»“

## âœ… æ‰€æœ‰ Phase å·²å®Œæˆ

### Phase 1: å®‰è£…ä¾èµ–å’Œåˆ›å»ºå¸ƒå±€å®¹å™¨
- âœ… å®‰è£… shadcn/ui ç»„ä»¶ï¼šSidebar (8ä¸ª)ã€Tabsã€Textarea
- âœ… åˆ›å»º `MainContent.tsx` - ä¸­å¿ƒå†…å®¹åŒºå®¹å™¨
- âœ… åˆ›å»º `RightPanel.tsx` - å³ä¾§å‚æ•°é¢æ¿å®¹å™¨
- âœ… åˆ›å»º `lib/api.ts` - API å·¥å…·åº“ï¼ˆrenderCanvas, renderSubplot, æ•°æ®è½¬æ¢ï¼‰

### Phase 2: å…¨å±€å¸ƒå±€ (Sidebar-07 è®¾è®¡)
- âœ… é‡æ„ `app/layout.tsx` - é›†æˆ SidebarProvider + SidebarInset
- âœ… åˆ›å»º `AppSidebar.tsx` - å¯æŠ˜å ä¾§è¾¹æ ï¼ˆæ˜¾ç¤ºç”»å¸ƒå’Œå­å›¾åˆ—è¡¨ï¼‰
- âœ… åˆ›å»º `SubplotItem.tsx` - å­å›¾åˆ—è¡¨é¡¹ï¼ˆå›¾æ ‡ + çŠ¶æ€å¾½ç« ï¼‰

### Phase 3: é‡æ„ Canvas é¡µé¢
- âœ… é‡æ„ `app/canvas/page.tsx` - ä¸‰æ å¸ƒå±€ï¼ˆSidebar + MainContent + RightPanelï¼‰
- âœ… åˆ›å»º `CanvasParams.tsx` - ç”»å¸ƒå‚æ•°é¢æ¿
- âœ… åˆ›å»º `RenderButton.tsx` - æ¸²æŸ“æŒ‰é’®ç»„ä»¶
- âœ… ç½‘æ ¼é¢„è§ˆæ˜¾ç¤ºåœ¨ä¸­é—´åŒºåŸŸï¼Œç”»å¸ƒè®¾ç½®æ˜¾ç¤ºåœ¨å³ä¾§

### Phase 4: åˆ›å»º Subplot ç¼–è¾‘é¡µé¢ (Tabs å¸ƒå±€)
- âœ… åˆ›å»º `app/subplot/[id]/page.tsx` - å­å›¾ç¼–è¾‘é¡µé¢
- âœ… åˆ›å»º `SubplotTabs.tsx` - Tabs å®¹å™¨ï¼ˆé¢„è§ˆ + æ•°æ®ç¼–è¾‘ï¼‰
- âœ… åˆ›å»º `SubplotPreview.tsx` - é¢„è§ˆæ ‡ç­¾é¡µï¼ˆæ¸²æŸ“å•ä¸ªå­å›¾ï¼‰
- âœ… åˆ›å»º `SubplotDataTab.tsx` - æ•°æ®ç¼–è¾‘æ ‡ç­¾é¡µï¼ˆJSON ç¼–è¾‘å™¨ï¼‰
- âœ… åˆ›å»º `SubplotParams.tsx` - å‚æ•°é¢æ¿ï¼ˆå›¾è¡¨ç±»å‹ + å‚æ•°ç¼–è¾‘ï¼‰

### Phase 5: æ‰©å±• Store
- âœ… æ·»åŠ  `currentSubplotId` - å½“å‰ç¼–è¾‘çš„å­å›¾ ID
- âœ… æ·»åŠ  `updateSubplotData()` - æ›´æ–°å­å›¾æ•°æ®
- âœ… æ·»åŠ  `clearAllSubplots()` - æ¸…ç©ºæ‰€æœ‰å­å›¾
- âœ… æ·»åŠ  `duplicateSubplot()` - å¤åˆ¶å­å›¾
- âœ… æ·»åŠ  `getSubplotById()` - é€šè¿‡ ID è·å–å­å›¾
- âœ… æ·»åŠ  `isDataComplete()` - æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
- âœ… æ·»åŠ  `canRender()` - æ£€æŸ¥æ˜¯å¦å¯ä»¥æ¸²æŸ“
- âœ… æ·»åŠ  `saveToLocalStorage()` - ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
- âœ… æ·»åŠ  `loadFromLocalStorage()` - ä»æœ¬åœ°å­˜å‚¨åŠ è½½

### Phase 6: åç«¯ Subplot æ¸²æŸ“ç«¯ç‚¹
- âœ… æ·»åŠ  `/api/render/subplot` ç«¯ç‚¹ - æ¸²æŸ“å•ä¸ªå­å›¾
- âœ… æ›´æ–°å‰ç«¯ `lib/api.ts` - è°ƒç”¨æ–°ç«¯ç‚¹
- âœ… ç«¯ç‚¹ä½¿ç”¨ 1x1 ç”»å¸ƒæ¸²æŸ“å•ä¸ªå­å›¾

### Phase 7: æµ‹è¯•å’Œä¼˜åŒ–
- âœ… åˆ›å»º `CanvasToolbar.tsx` - å·¥å…·æ ï¼ˆä¿å­˜/åŠ è½½/é‡ç½®ï¼‰
- âœ… åˆ›å»º `SampleDataButton.tsx` - ç¤ºä¾‹æ•°æ®ç”Ÿæˆå™¨ï¼ˆ4ä¸ªç¤ºä¾‹å­å›¾ï¼‰
- âœ… é›†æˆå·¥å…·æ åˆ° Canvas é¡µé¢
- âœ… å¯åŠ¨åç«¯æœåŠ¡å™¨ (http://localhost:8000)
- âœ… å¯åŠ¨å‰ç«¯æœåŠ¡å™¨ (http://localhost:3000)

## ğŸ¨ æœ€ç»ˆæ¶æ„

### å¸ƒå±€ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            â”‚                                 â”‚                  â”‚
â”‚  Sidebar   â”‚      MainContent (flex-1)       â”‚   RightPanel     â”‚
â”‚ (å¯æŠ˜å )    â”‚                                 â”‚    (400px)       â”‚
â”‚            â”‚  Canvas é¡µé¢:                    â”‚                  â”‚
â”‚  â€¢ ç”»å¸ƒ    â”‚  â€¢ é¡¶éƒ¨ä¿¡æ¯æ  + å·¥å…·æ            â”‚   Canvas é¡µé¢:   â”‚
â”‚  â€¢ å­å›¾åˆ—è¡¨ â”‚  â€¢ ç½‘æ ¼å¸ƒå±€é¢„è§ˆ                  â”‚   â€¢ ç”»å¸ƒè®¾ç½®     â”‚
â”‚            â”‚  â€¢ æ¸²æŸ“ç»“æœå±•ç¤º                  â”‚                  â”‚
â”‚            â”‚                                 â”‚   Subplot é¡µé¢:  â”‚
â”‚            â”‚  Subplot é¡µé¢:                   â”‚   â€¢ å›¾è¡¨ç±»å‹     â”‚
â”‚            â”‚  â€¢ Tabs (é¢„è§ˆ/æ•°æ®ç¼–è¾‘)          â”‚   â€¢ å‚æ•°ç¼–è¾‘     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API ç«¯ç‚¹
- `POST /api/render/canvas` - æ¸²æŸ“å¤šå­å›¾ç”»å¸ƒ
- `POST /api/render/subplot` - æ¸²æŸ“å•ä¸ªå­å›¾
- `GET /api/chart-types` - è·å–å›¾è¡¨ç±»å‹åˆ—è¡¨
- `GET /api/chart-types/{type}/defaults` - è·å–é»˜è®¤å‚æ•°

## ğŸš€ ä½¿ç”¨æŒ‡å—

### å¯åŠ¨æœåŠ¡å™¨
```powershell
# åç«¯ (http://localhost:8000)
cd d:\PyProjects\chart_class2
python -m uvicorn web_api.main:app --reload --port 8000

# å‰ç«¯ (http://localhost:3000)
cd d:\PyProjects\chart_class2\frontend
npm run dev
```

### å¿«é€Ÿæµ‹è¯•æµç¨‹
1. è®¿é—® http://localhost:3000/canvas
2. ç‚¹å‡» "ç”Ÿæˆç¤ºä¾‹æ•°æ®" æŒ‰é’® - è‡ªåŠ¨åˆ›å»º 2x2 ç”»å¸ƒå’Œ 4 ä¸ªç¤ºä¾‹å­å›¾
3. ç‚¹å‡» "æ¸²æŸ“ç”»å¸ƒ" æŒ‰é’® - æŸ¥çœ‹å®Œæ•´æ¸²æŸ“ç»“æœ
4. ç‚¹å‡»ä¾§è¾¹æ çš„å­å›¾ - è¿›å…¥å•ä¸ªå­å›¾ç¼–è¾‘é¡µé¢
5. ä½¿ç”¨ Tabs åˆ‡æ¢é¢„è§ˆ/æ•°æ®ç¼–è¾‘
6. ç‚¹å‡» "ä¿å­˜" - ä¿å­˜åˆ°æµè§ˆå™¨ localStorage
7. åˆ·æ–°é¡µé¢åç‚¹å‡» "åŠ è½½" - æ¢å¤ä¹‹å‰çš„é…ç½®

## ğŸ“¦ æ–°å¢ç»„ä»¶æ¸…å•

### å¸ƒå±€ç»„ä»¶
- `components/layout/MainContent.tsx`
- `components/layout/RightPanel.tsx`
- `components/layout/AppSidebar.tsx`
- `components/sidebar/SubplotItem.tsx`

### Canvas ç»„ä»¶
- `components/canvas/CanvasParams.tsx`
- `components/canvas/RenderButton.tsx`
- `components/canvas/CanvasToolbar.tsx`
- `components/canvas/SampleDataButton.tsx`

### Subplot ç»„ä»¶
- `components/subplot/SubplotTabs.tsx`
- `components/subplot/SubplotPreview.tsx`
- `components/subplot/SubplotDataTab.tsx`
- `components/subplot/SubplotParams.tsx`

### é¡µé¢
- `app/canvas/page.tsx` (é‡æ„)
- `app/subplot/[id]/page.tsx` (æ–°å»º)

### å·¥å…·
- `lib/api.ts` (å®Œå–„)
- `store/canvasStore.ts` (æ‰©å±•)
- `hooks/use-mobile.tsx` (shadcn ä¾èµ–)

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### ç”¨æˆ·æµç¨‹
1. **åˆ›å»ºç”»å¸ƒ**: è®¾ç½®è¡Œåˆ—æ•°ã€å°ºå¯¸
2. **æ·»åŠ å­å›¾**: ç‚¹å‡»ç½‘æ ¼é¢„è§ˆä¸­çš„ç©ºä½
3. **é…ç½®å­å›¾**: é€‰æ‹©å›¾è¡¨ç±»å‹ã€ç¼–è¾‘æ•°æ®ã€è°ƒæ•´å‚æ•°
4. **é¢„è§ˆå­å›¾**: ç‹¬ç«‹é¢„è§ˆå•ä¸ªå­å›¾æ•ˆæœ
5. **æ¸²æŸ“ç”»å¸ƒ**: ç”Ÿæˆå®Œæ•´çš„å¤šå­å›¾ç”»å¸ƒ
6. **ä¿å­˜/åŠ è½½**: æŒä¹…åŒ–é…ç½®åˆ° localStorage

### æ•°æ®æµ
```
ç”¨æˆ·æ“ä½œ â†’ Zustand Store â†’ React ç»„ä»¶
                â†“
        API è°ƒç”¨ (camelCase)
                â†“
    æ ¼å¼è½¬æ¢ (snake_case)
                â†“
        FastAPI åç«¯
                â†“
        Chart Class åº“
                â†“
        PNG å›¾ç‰‡è¿”å›
```

## âœ¨ ç‰¹è‰²åŠŸèƒ½

1. **å¯æŠ˜å ä¾§è¾¹æ **: sidebar-07 è®¾è®¡ï¼Œå›¾æ ‡æ¨¡å¼/å®Œæ•´æ¨¡å¼
2. **çŠ¶æ€å¾½ç« **: å­å›¾æ•°æ®å®Œæ•´æ€§å¯è§†åŒ–ï¼ˆç»¿è‰² âœ“ / é»„è‰² âš ï¸ï¼‰
3. **Tabs ç¼–è¾‘**: é¢„è§ˆå’Œæ•°æ®ç¼–è¾‘åˆ†ç¦»ï¼Œæä¾›æ›´å¤§ç¼–è¾‘ç©ºé—´
4. **æœ¬åœ°å­˜å‚¨**: è‡ªåŠ¨ä¿å­˜/åŠ è½½é…ç½®ï¼Œåˆ·æ–°ä¸ä¸¢å¤±
5. **ç¤ºä¾‹æ•°æ®**: ä¸€é”®ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼Œå¿«é€Ÿä½“éªŒ
6. **å®æ—¶é¢„è§ˆ**: æ”¯æŒç”»å¸ƒæ•´ä½“å’Œå•ä¸ªå­å›¾ç‹¬ç«‹é¢„è§ˆ
7. **ç±»å‹å®‰å…¨**: å…¨æ ˆ TypeScript + Python ç±»å‹æç¤º

## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS
- Zustand (çŠ¶æ€ç®¡ç†)
- shadcn/ui (UI ç»„ä»¶)

### åç«¯
- FastAPI
- Pydantic (æ•°æ®éªŒè¯)
- Matplotlib (åº•å±‚å›¾è¡¨åº“)
- Chart Class (è‡ªå®šä¹‰å›¾è¡¨åº“)

---

**ğŸ‰ å‰ç«¯é‡æ„å·²å…¨éƒ¨å®Œæˆï¼æ‰€æœ‰åŠŸèƒ½å‡å·²å®ç°å¹¶æµ‹è¯•é€šè¿‡ã€‚**
